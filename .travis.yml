stage: unittest
dist: xenial
language: python
python:
    - 3.4
    - 3.5
    - 3.6
    - 3.7
    - 3.8
    - 3.9
install:
  - pip install -r requirements.txt
  - pip install coveralls
script:
  - make coveragetest
after_success:
  - coveralls

jobs:
  - stage: inttest
    if: branch = master
    dist: xenial
    language: python
    python: 3.5
    install:
      - pip install -r requirements.txt
    script:
      - travis_wait 30 make inttest
  - stage: lint
    dist: xenial
    language: python
    python: 3.5
    install:
      - pip install -r requirements.txt
    script:
      - make lint